(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{156:function(e,t,a){},157:function(e,t,a){},164:function(e,t,a){},184:function(e,t,a){},185:function(e,t,a){},186:function(e,t,a){},187:function(e,t,a){},189:function(e,t,a){},191:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),i=a(11),s=a.n(i),r=a(33),o=a(94),l=a(39),u=a(87),m=a(67),p={searchList:[]},h=Object(l.c)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};switch(t.type){case"SAVE_SERACH_LIST":return Object(m.a)({},e,{searchList:t.searchList});case"REMOVE_SERACH_LIST":return Object(m.a)({},e,{searchList:[]});default:return e}},Object(l.a)(u.a)),f=a(92),d=a(23),v=a(3),b=a(4),E=a(6),S=a(5),g=a(7),y=a(14),j=a.n(y),L=(a(107),a(108),a(48)),k=a.n(L);var O=0;function N(){0===O&&k.a.loading("\u52a0\u8f7d\u4e2d...",0),O++}function C(){O<=0||0===--O&&k.a.hide()}a(156);var T=function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(S.a)(t).call(this,e))).appSearch=function(e,t){var a=null;return t=t||200,function(){var n=arguments,c=this;clearTimeout(a),a=setTimeout(function(){e.apply(c,n)},t)}}(function(){var e=a.refs.keyword.value;a.props.appSearch(e)},500),a.showCancelBtn=!1,a.state={},a}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.setState({showCancelBtn:this.props.showCancelBtn})}},{key:"onFoucs",value:function(){this.props.onFoucs()}},{key:"onCancel",value:function(){this.props.onCancel()}},{key:"focus",value:function(){this.refs.keyword.focus()}},{key:"render",value:function(){return c.a.createElement("div",{className:"search-container"},c.a.createElement("div",{className:"search-bar"},c.a.createElement("div",{className:"iconfont icon-search"}),c.a.createElement("input",{className:"search-input",type:"text",ref:"keyword",onChange:this.appSearch.bind(this),onFocus:this.onFoucs.bind(this),placeholder:"\u641c\u7d22\u5e94\u7528"}),this.state.showCancelBtn&&c.a.createElement("div",{className:"search-cancel",onClick:this.onCancel.bind(this)},"\u53d6\u6d88")))}}]),t}(n.Component),w=(a(157),function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"recommend-container"},c.a.createElement("div",{className:"title"},"\u63a8\u8350"),c.a.createElement("ul",{className:"app-list"},this.props.list.map(function(e,t){return c.a.createElement("li",{className:"app-item",key:t},c.a.createElement("img",{className:"app-icon",src:e["im:image"][0].label,alt:""}),c.a.createElement("div",{className:"app-name"},e["im:name"].label),c.a.createElement("div",{className:"app-categray"},e.category.attributes.label))})))}}]),t}(n.Component)),A=a(90),D=a.n(A),M=(a(164),function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"appList-container"},c.a.createElement("ul",{className:"list"},this.props.list.map(function(e,t){return c.a.createElement("li",{className:"list-item",key:t},c.a.createElement("div",{className:"app-index"},t+1),c.a.createElement("div",{className:"app-img"},c.a.createElement(D.a,{offsetVertical:100},c.a.createElement("img",{className:"app-icon",src:e["im:image"][0].label,alt:""}))),c.a.createElement("div",{className:"app-info"},c.a.createElement("div",{className:"app-name"},e["im:name"].label),c.a.createElement("div",{className:"app-categray"},e.category.attributes.label)))})))}}]),t}(n.Component)),F=a(91),R=a.n(F).a.create({baseURL:"/",timeout:15e3,headers:{"Content-Type":"application/x-www-form-urlencoded"}});R.interceptors.request.use(function(e){return N(),e},function(e){return Promise.reject(e)}),R.interceptors.response.use(function(e){return setTimeout(function(){C()},1e3),e.data},function(e){return C(),k.a.fail("\u670d\u52a1\u5668\u9519\u8bef",2),Promise.reject(e)});var B=R,_={appListData:function(e){return B.get("/mock/appListData.json",e)},recommendData:function(e){return B.get("/mock/recomendData.json",e)},lookUp:function(e){return B.get("/mock/lookUp.json",e)}},x=(a(184),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(S.a)(t).call(this,e))).handleAction=function(e){if(e===a.state.action)return!1;e===y.STATS.refreshing?a.handRefreshing():e===y.STATS.loading?a.handLoadMore():a.setState({action:e})},a.handRefreshing=function(){a.setState({action:y.STATS.refreshing}),a.getAppList()},a.handLoadMore=function(){if(y.STATS.loading===a.state.action)return!1;if(a.state.hasMore){a.setState({action:y.STATS.loading});var e=a.state.page+1;setTimeout(function(){a.getPageData(e)},1500)}},a.state={appList:[],appListAll:[],recommendList:[],hasMore:!0,action:y.STATS.init,pageSize:10,page:1},a}return Object(g.a)(t,e),Object(b.a)(t,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){}},{key:"loadData",value:function(){this.getAppList(),this.getRecommendList()}},{key:"getAppList",value:function(){var e=this;_.appListData({}).then(function(t){var a=t.feed.entry;e.setState({appListAll:a,hasMore:!0,action:y.STATS.refreshed}),e.getPageData(1)}).catch(function(t){console.log(t),e.setState({action:y.STATS.refreshed})})}},{key:"getRecommendList",value:function(){var e=this;_.recommendData({}).then(function(t){var a=t.feed;e.setState({recommendList:a.entry})}).catch(function(e){console.log(e)})}},{key:"getPageData",value:function(e){for(var t=[],a=[],n=this.state.appListAll,c=this.state.pageSize,i=Math.ceil(n.length/c),s=c*e,r=c*(e-1);r<s;r++)t.push(n[r]);e>=i&&this.setState({hasMore:!1}),a=1===e?t:this.state.appList.concat(t),this.setState({appList:a,page:e,pageSize:c,action:y.STATS.reset})}},{key:"onFoucs",value:function(){this.props.history.push("/search/result")}},{key:"render",value:function(){return c.a.createElement("div",{className:"container"},c.a.createElement("div",{className:"search-bar"},c.a.createElement(T,{onFoucs:this.onFoucs.bind(this)})),c.a.createElement(j.a,{className:"block",isBlockContainer:!0,downEnough:100,action:this.state.action,handleAction:this.handleAction,hasMore:this.state.hasMore,distanceBottom:100},c.a.createElement(w,{list:this.state.recommendList}),c.a.createElement(M,{list:this.state.appList})))}}]),t}(n.Component)),I=(a(185),function(e){function t(){return Object(v.a)(this,t),Object(E.a)(this,Object(S.a)(t).apply(this,arguments))}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"searchList-container"},c.a.createElement("ul",{className:"list"},this.props.searchList.map(function(e,t){return c.a.createElement("li",{className:"list-item",key:t},c.a.createElement("img",{className:"app-icon",src:e.artworkUrl100,alt:""}),c.a.createElement("div",{className:"app-info"},c.a.createElement("div",{className:"app-name"},e.trackName),c.a.createElement("div",{className:"app-summary"},e.primaryGenreName)))})))}}]),t}(n.Component)),U=Object(r.b)(function(e){return{searchList:e.searchList}})(I),P=(a(186),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(S.a)(t).call(this,e))).state={searchList:[]},a}return Object(g.a)(t,e),Object(b.a)(t,[{key:"appSearch",value:function(e){var t=this;_.lookUp({}).then(function(e){t.setState({searchList:e.results}),t.props.saveSearchList(t.state.searchList)}).catch(function(e){console.log(e)})}},{key:"componentDidMount",value:function(){this.manualFocusInst.focus()}},{key:"onFoucs",value:function(){}},{key:"onCancel",value:function(){this.props.history.push("/"),this.props.removeSearchList()}},{key:"render",value:function(){var e=this;return c.a.createElement("div",{className:"searchResult-container"},c.a.createElement(T,{appSearch:this.appSearch.bind(this),ref:function(t){return e.manualFocusInst=t},onCancel:this.onCancel.bind(this),onFoucs:this.onFoucs.bind(this),showCancelBtn:!0}),c.a.createElement(U,null))}}]),t}(n.Component)),V=Object(r.b)(function(e){return{searchList:e.searchList}},function(e){return{saveSearchList:function(t){return e(function(e){return{type:"SAVE_SERACH_LIST",searchList:e}}(t))},removeSearchList:function(){return e({type:"REMOVE_SERACH_LIST"})}}})(P),H=(a(187),function(e){function t(e){var a;return Object(v.a)(this,t),(a=Object(E.a)(this,Object(S.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(b.a)(t,[{key:"render",value:function(){return c.a.createElement("div",{className:"profile"},"profile")}}]),t}(n.Component)),z=function(){return c.a.createElement(f.a,null,c.a.createElement(d.c,null,c.a.createElement(d.a,{exact:!0,path:"/",component:x}),c.a.createElement(d.a,{exact:!0,path:"/search/result",component:V}),c.a.createElement(d.a,{exact:!0,path:"/profile",component:H})))};a(189),Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var W;W=z,s.a.render(c.a.createElement(r.a,{store:h},c.a.createElement(o.AppContainer,null,c.a.createElement(W,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})},95:function(e,t,a){e.exports=a(191)}},[[95,1,2]]]);
//# sourceMappingURL=main.cefcc99e.chunk.js.map